+++
title = "分業について"
tags = ["マイクロサービス"]
date = "2021-06-13"
+++

どこかに書いたような気がするけれども自分がCDKを使っている理由の1つには、仕事の分業化がしやすくなるのではないかという期待があるため、というのがある。
もちろん全ては作り方次第だと思うので、分業のしやすさはCDKであるかのどうかの問題ではないのは当たり前で、
そもそもモノリシックなシステムを1つのリポジトリで作る時でも分業は実際にされているわけで、それがしにくいのは作り方の問題だとは思う。
けれど自分の考えとしては、使う道具が変われば設計が変わってくるだろうから、例えばCDKという道具を使うこと、それは結果的にAWSのもつ機能の組み合わせで問題を解決していこうという方向に向かうもの
と考えているのだけど、そのことによって結果的にどちらかというとシステムは分離独立することになり、
結局モノリシックなものでなくなり分業しやすくなるんじゃないかというような考えを持っていた。いや多分今でもそうなのではないかなあと思っている。

で、こうしてシステムが分離されていくことで、システム全体のことを把握していない人にも仕事を簡単にアサインできるのではないかということに、自分がCDKを使っていることの一番の期待があった。
仕様を明確にして何ならテストコードを先に用事しておいて、Amazon Mechanical Turkのようなサイトでワーカーを探して発注することができるのではないか、というような期待をしていた。

一般的に開発リソースをスケールアップするには、誰かを雇ってその人が活躍できる状態になるまで知識を増やしてもらう必要があるが、それでなかなかスケールしにくいし労働者の流動性は低くなる。
これは例えば数ヶ月程度で終わるような単発の仕事なら、そもそもこうした問題は対して考えなくても良いかもしれないが、もっと開発に長い期間を要するシステムだとこのスケーラビリティだとか
流動性というのは重要な課題になってくると思う。

けれど最近それは成立しない気がしてきた。

1つ1つの仕事は可能な限り細分化するとする。
細かい仕様を決める必要がある。
例えばテストを先に書いてもいい。
いずれにしてもそうした形で依頼するためには、結局それを一度自分が作ったことがあるぐらいの知識がないと、あまりうまくいかない。
知識が不足していると、実際に作ってみようとした時にどんな点で難しさがあるかわからない。
例えばテストを通過する仕組みを作るのはとても非効率なことかもしれなかったりするが、それに気が付かない。
自分で作ってみると実はもっと楽に解決できる方法があることに気がつくかもしれないが、そうでない仕様を指定しているのでコストが高くなる。
逆にワーカーのような人から「こう作った方がいいと思う」と提案されたりすることになる。

こうした状態だと外注する意味がなくなってしまう。

つまりこういう状態が発生する。

* 仕事はとても小さいので人がコードを書く時間は半日程度で終わるようなものになる。
* 仕様を決めるための知識はそれを作るのと同じレベルのものが必要となる。
* ワーカーを探すのに時間がかかる。
* 仕様を決めて伝える（仕様書を作る）のに時間がかかる。
* 知識が不足していてワーカーが別の方法を提案してきた場合、そのためのやりとりにまた時間がかかる。
* その程度の時間があれば、作りたいシステムは発注者が自分一人で作れてしまう。

結局仕事をどんどん細分化してワーカーに頼むみたいなことは幻想でしかないというふうに思う。
逆にいうと仕事を頼みたいのはワーカーじゃなくてチームメンバーのような人ということになる。

その人に何をどんな風に頼んだらどういう仕事をしてくれるのかおおよその予想がついていて、仕事をするたびにその匙加減が互いにわかってきて効率化し、仕様は作る前にははっきり決めてないけど大体こういうことをやりたい、ということをお互いに伝えてあとはベストエフォートでその人が作ってくれて、場合によってはどういう作りにするかを相談して決めていく、といった極めて人間的な従来からある形でのチームワークがむしろ結局一番コストが低いねえということになるのかもしれない。

自分としてはAIがプログラムを書いてくれる時代が来たらいいなあと思う部分はあるんだけど、どうなんだろう。
どこかの段階で機械に頼む方が結果的に早いという状態にはなるんじゃないかとは思うけど、うーむ。
